
import { DATASETS } from './datasets.js';

export { DATASETS };

export const DRILL_QUESTS = [
    {
        id: 1,
        text: "【調査依頼：校長先生】\n「『身長が高い生徒ほど、テストの点数が良い』なんていう妙な噂が流れておる…。\nわしの目から見れば、単に長く勉強している生徒が良い点を取っているように思うのだが。\nデータを使って、本当に成績と関係があるのは『身長』なのか『勉強時間』なのか、ハッキリさせてくれんか！」",
        datasetId: "students",
        initialX: "height", // あえて間違った仮説(身長)を初期値に
        initialY: "score",
        targetKey: "study_time",
        validAnswers: ["study_time"], 
        explicitObjective: "成績（テスト点数）を上げるための本当の要因を探せ！",
        expectedStrength: "かなり強い正の相関がある",
        hint: "Y軸（縦）は「テスト点数」のままでOK。X軸（横）を「身長」から他の項目に変えてみよう。右上がり（正の相関）になる項目が見つかるはずだ。",
        causationNote: "【調査完了】校長先生の言う通りでした！「身長」と点数はバラバラ（無相関）ですが、「勉強時間」と点数には綺麗な右上がりの関係（正の相関）があります。噂はデマだったことが証明されました。"
    },
    {
        id: 2,
        text: "【調査依頼：生活指導の先生】\n「最近、授業中に居眠りをする生徒や、成績が急に下がった生徒が増えている気がするんだ。\n生徒への聞き取りでは『夜遅くまでスマホを見ている』という声が多いのだが…。\nスマホの使用時間が長いと、何が犠牲になっているのか？ そして成績にどう響いているのか？\n深刻な悪影響を見つけて、生徒たちに警告したいんだ！」",
        datasetId: "students",
        initialX: "smartphone_time",
        initialY: "score",
        targetKey: "smartphone_time", // スマホ時間に対して負の相関があるものを探させる
        validAnswers: ["score", "study_time", "sleep_time"],
        explicitObjective: "スマホ時間が長いと「減ってしまうもの（負の相関）」を探せ！",
        expectedStrength: "強い負の相関がある",
        hint: "X軸は「スマホ使用時間」に固定しよう。Y軸を色々変えてみて、右下がり（負の相関）になるグラフを探してほしい。成績、勉強時間、睡眠時間…どれか1つでも見つかれば証拠になる！",
        causationNote: "【調査完了】データは残酷な現実を示しました。スマホ時間が長い生徒ほど、「睡眠時間」や「勉強時間」が減り、結果として「テスト点数」も下がっています（負の相関）。これを生徒に見せれば、きっと行動を改めてくれるでしょう。"
    },
    {
        id: 3,
        text: "【調査依頼：ゲーム開発部】\n「新作RPGのバランス調整中なんだけど、テストプレイヤーから『重装備のキャラが弱すぎる』って苦情が来てるんだ。\nどうやら、重い鎧を装備すると、ある重要なステータスが下がりすぎて、敵の攻撃を避けられなくなってるみたいだ。\n装備の重さとトレードオフ（一方が上がると他方が下がる）になっているステータスを特定してくれないか？」",
        datasetId: "rpg_game",
        initialX: "equip_weight",
        initialY: "hp",
        targetKey: "equip_weight",
        validAnswers: ["speed"],
        explicitObjective: "装備重量が増えると「下がってしまう能力」を特定せよ！",
        expectedStrength: "負の相関がある", 
        hint: "X軸は「装備重量」。重い鎧を着ると、キャラクターの動きはどうなる？「素早さ」や「攻撃力」などをY軸にして確認してみよう。",
        causationNote: "【調査完了】やはり…。「装備重量」が増えるほど「素早さ」が極端に下がっています。これでは敵の攻撃を回避できません。開発チームに報告して、重装備でも最低限のスピードは確保できるように修正してもらいましょう。"
    },
    {
        id: 4,
        text: "【調査依頼：コンビニ店長】\n「もうすぐ夏本番！ 暑くなると売れる商品を見極めて、在庫をたっぷり確保しておきたいんだ。\n気温が上がると、アイスが売れるのはなんとなく分かるが、他にもっと強く売上が伸びる商品はないかな？\n気温との結びつき（相関）が一番強い商品を見つけて、発注リストに加えたい！」",
        datasetId: "convenience",
        initialX: "temperature",
        initialY: "customers",
        targetKey: "temperature",
        validAnswers: ["cold_drink_sales", "icecream_sales"], 
        explicitObjective: "気温が上がると「最も売れる（強い正の相関）」商品を探せ！",
        expectedStrength: "かなり強い正の相関がある",
        hint: "X軸は「最高気温」。Y軸を商品ごとの売上に変えてみよう。アイスも売れるけど、もっと点が一直線に並ぶ（相関が強い）飲み物があるんじゃないかな？",
        causationNote: "【調査完了】データを見ると、「清涼飲料水」が気温と非常に強い正の相関を示しています！アイス以上に、喉の渇きを潤すドリンクの需要は気温に敏感なようです。早速大量発注しましょう！"
    },
    {
        id: 5,
        text: "【調査依頼：新人アルバイト】\n「店長！大発見です！\nデータを見ていたら『アイスが売れる日ほど、水難事故（海での事故）が増える』という衝撃的な関係を見つけました！\nアイスには人を海に行かせる成分が含まれているに違いありません！\n…え？違う？ じゃあ、この2つが同時に増える『本当の理由』をデータで証明してください！」",
        datasetId: "convenience",
        initialX: "icecream_sales",
        initialY: "customers", // ダミー。ここから交絡因子を探させる
        targetKey: "icecream_sales", // 実際には交絡因子を探すのだが、システム上はY軸選択
        validAnswers: ["temperature"], // 交絡因子である「気温」を選択させたいが、scatterでは2変数しか選べないので、Yに気温を選ぶことで「アイスと気温の相関」を確認させる流れ
        explicitObjective: "アイスと事故、両方の「共通の原因（交絡因子）」となっているデータを探せ！",
        expectedStrength: "かなり強い正の相関がある",
        hint: "アイスが売れるのも、海で事故が増えるのも、ある「気象条件」のせいじゃないかな？Y軸をその条件（例：気温）に変えて、アイスとの関係を見てみよう。",
        causationNote: "【調査完了】その通り！「アイスの売上」と「気温」には強い関係があります。暑いからアイスが売れるし、暑いから海に行って事故も増える。これを『疑似相関』と言います。アイスは無実でしたね！"
    },
    {
        id: 6,
        text: "【調査依頼：統計の先生】\n「最後は難問だぞ。『相関がない（無相関）』ということを見つけるのも、立派な発見だ。\n世の中には『関係がありそうで、実は全く関係ない』ことがたくさんある。\nこのクラスのデータの中で、テストの点数とは全く関係がない（バラバラな）項目を見つけてみてくれ。」",
        datasetId: "students",
        initialX: "score",
        initialY: "study_time",
        targetKey: "score",
        validAnswers: ["height", "commute_time"],
        explicitObjective: "テスト点数と「関係がない（相関なし）」項目を探せ！",
        expectedStrength: "ほとんど相関がない",
        hint: "「通学時間」が長いと成績が下がる？「身長」が高いと有利？ 色々試して、グラフの点が丸くバラバラに散らばるものを探そう。",
        causationNote: "【調査完了】正解です！「身長」や「通学時間」のグラフは点がバラバラで、右上がりでも右下がりでもありません。これは『どちらの数値も、テストの点数には影響しない』という重要な事実を表しています。"
    }
];

export const EXTRA_MISSION_STAGES = [
    { 
        type: "cleaning",
        datasetId: "extra_cleaning_1", 
        xKey: "study_time", 
        yKey: "score", 
        targetR: 0.95,
        title: "居眠り先生の入力ミス",
        intro: "「やってしまった…」徹夜明けの先生が、テスト結果の入力中に居眠りをしてしまったようです。「勉強時間がすごいのに点数が低すぎる」などの、ありえないデータを探して修正（除外）してください！",
        explanation: "【解説】入力ミス（外れ値）は、データ全体の分析結果を大きく歪めてしまいます。たった1つのミスデータを取り除くだけで、相関係数が劇的に改善し、正しい傾向が見えるようになったはずです。"
    },
    {
        type: "selection",
        datasetId: "extra_selection_1",
        xKey: "study_time",
        yKey: "score",
        targetIds: [21, 22, 23],
        title: "天才肌の生徒を探せ",
        intro: "「勉強時間は短いのに、なぜか高得点を取る生徒が3人いるらしい…」そんな噂の真相を確かめます。散布図上で『勉強時間が短い（左側）＆点数が高い（上側）』エリアにいる3人のデータを特定（クリックして選択）してください！ ※紛らわしい生徒もいるので注意！",
        explanation: "【解説】散布図を使うと、集団の中で「特異な存在」を一目で見つけることができます。彼らは効率的な勉強法を知っているのかもしれません。平均的な傾向（回帰直線）から大きく外れたデータには、新しい発見が隠れていることがあります。"
    },
    { 
        type: "selection",
        datasetId: "extra_selection_2", 
        xKey: "equip_weight", 
        yKey: "attack", 
        targetIds: [33],
        title: "伝説の武器を発掘せよ",
        intro: "「軽くて強い武器はいくつかあるが、常識外れの性能を持つ\"伝説の1本\"があるらしい」鍛冶屋の親父からの依頼です。『非常に軽いのに、攻撃力が飛び抜けて高い』究極のデータを1つだけ特定してください！",
        explanation: "【解説】データ分析は「トレードオフ（あちらを立てればこちらが立たず）」を超える価値を見つけるのにも役立ちます。良いデータの中でも、群を抜いて優れた外れ値（アウトライヤー）を見つけることが、最強への近道です。"
    }
];
